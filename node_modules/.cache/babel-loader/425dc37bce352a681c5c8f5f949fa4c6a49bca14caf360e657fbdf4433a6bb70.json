{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{FavoriteContext}from'../../../../../../context/FavoriteContext';import{CartContext}from'../../../../../../context/CartContext';import heart from'../../../../../../assets/icons/heart.svg';import heartRed from'../../../../../../assets/icons/heart-red.svg';import'./Product.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Product=_ref=>{var _cartItems$find;let{product}=_ref;const{id,name,price,oldPrice,image,isSale,isNew}=product;const{toggleFavorite}=useContext(FavoriteContext);const{cartItems,addToCart,updateQuantity}=useContext(CartContext);const[isFavorite,setIsFavorite]=useState(false);const quantity=((_cartItems$find=cartItems.find(item=>item.id===id))===null||_cartItems$find===void 0?void 0:_cartItems$find.quantity)||0;useEffect(()=>{const favorites=JSON.parse(localStorage.getItem('PRODUCT_IN_HEART'))||[];const favorite=favorites.some(item=>item.id===id);setIsFavorite(favorite);},[id]);const handleFavoriteClick=()=>{toggleFavorite(product);setIsFavorite(prev=>!prev);};const handleAddToCart=()=>{addToCart(product);};const handleQuantityChange=change=>{updateQuantity(id,change);};const getLabels=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[isSale&&/*#__PURE__*/_jsx(\"div\",{className:\"label sale\",children:\"Sale\"},\"sale\"),isNew&&/*#__PURE__*/_jsx(\"div\",{className:\"label new\",children:\"New\"},\"new\")]});return/*#__PURE__*/_jsxs(\"div\",{className:\"product\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"photo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"labels\",children:getLabels()}),/*#__PURE__*/_jsx(\"div\",{className:\"favorites\",children:/*#__PURE__*/_jsx(\"img\",{className:\"favorite-icon\",src:isFavorite?heartRed:heart,alt:\"Favorite Icon\",onClick:handleFavoriteClick})})]}),/*#__PURE__*/_jsx(\"img\",{src:image,className:\"product-image\",alt:name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"current-price\",children:\"$\".concat(price)}),oldPrice&&/*#__PURE__*/_jsx(\"div\",{className:\"old-price\",children:\"$\".concat(oldPrice)})]})]}),quantity===0?/*#__PURE__*/_jsx(\"button\",{className:\"buy-btn\",onClick:handleAddToCart,children:\"Buy\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"quantity\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"count-button\",onClick:()=>handleQuantityChange(-1),children:\"-\"}),/*#__PURE__*/_jsx(\"div\",{className:\"count\",children:quantity}),/*#__PURE__*/_jsx(\"div\",{className:\"count-button\",onClick:()=>handleQuantityChange(1),children:\"+\"})]})]});};export default Product;","map":{"version":3,"names":["React","useState","useEffect","useContext","FavoriteContext","CartContext","heart","heartRed","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Product","_ref","_cartItems$find","product","id","name","price","oldPrice","image","isSale","isNew","toggleFavorite","cartItems","addToCart","updateQuantity","isFavorite","setIsFavorite","quantity","find","item","favorites","JSON","parse","localStorage","getItem","favorite","some","handleFavoriteClick","prev","handleAddToCart","handleQuantityChange","change","getLabels","children","className","src","alt","onClick","concat"],"sources":["/Users/valerypronin/Desktop/reactproject/react-project2/src/components/Shop/components/ProductList/components/Product/Product.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { FavoriteContext } from '../../../../../../context/FavoriteContext'\nimport { CartContext } from '../../../../../../context/CartContext'\n\nimport heart from '../../../../../../assets/icons/heart.svg'\nimport heartRed from '../../../../../../assets/icons/heart-red.svg'\n\nimport './Product.css'\n\nconst Product = ({ product }) => {\n  const { id, name, price, oldPrice, image, isSale, isNew } = product\n\n  const { toggleFavorite } = useContext(FavoriteContext)\n  const { cartItems, addToCart, updateQuantity } = useContext(CartContext)\n\n  const [isFavorite, setIsFavorite] = useState(false)\n  const quantity = cartItems.find(item => item.id === id)?.quantity || 0\n\n  useEffect(() => {\n    const favorites = JSON.parse(localStorage.getItem('PRODUCT_IN_HEART')) || []\n    const favorite = favorites.some(item => item.id === id)\n    setIsFavorite(favorite)\n  }, [id])\n\n  const handleFavoriteClick = () => {\n    toggleFavorite(product)\n    setIsFavorite(prev => !prev)\n  }\n\n  const handleAddToCart = () => {\n    addToCart(product)\n  }\n  \n  const handleQuantityChange = (change) => {\n    updateQuantity(id, change)\n  }\n  \n  const getLabels = () => (\n    <>\n      {isSale && <div key=\"sale\" className=\"label sale\">Sale</div>}\n      {isNew && <div key=\"new\" className=\"label new\">New</div>}\n    </>\n  )\n\n  return (\n    <div className=\"product\">\n      <div className=\"photo\">\n        <div className=\"top-bar\">\n          <div className=\"labels\">{getLabels()}</div>\n          <div className=\"favorites\">\n            <img\n              className=\"favorite-icon\"\n              src={isFavorite ? heartRed : heart}\n              alt=\"Favorite Icon\"\n              onClick={handleFavoriteClick}\n            />\n          </div>\n        </div>\n        <img src={image} className=\"product-image\" alt={name} />\n      </div>\n      <div className=\"info\">\n        <div className=\"name\">{name}</div>\n        <div className=\"price\">\n          <div className=\"current-price\">{`$${price}`}</div>\n          {oldPrice && <div className=\"old-price\">{`$${oldPrice}`}</div>}\n        </div>\n      </div>\n\n      {quantity === 0 ? (\n        <button className=\"buy-btn\" onClick={handleAddToCart}>Buy</button>\n      ) : (\n        <div className=\"quantity\">\n          <div\n            className=\"count-button\"\n            onClick={() => handleQuantityChange(-1)}\n          >\n            -\n          </div>\n          <div className=\"count\">{quantity}</div>\n          <div\n            className=\"count-button\"\n            onClick={() => handleQuantityChange(1)}\n          >\n            +\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Product"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}