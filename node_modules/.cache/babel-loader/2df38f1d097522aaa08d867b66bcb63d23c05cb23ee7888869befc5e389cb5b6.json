{"ast":null,"code":"var _jsxFileName = \"/Users/valerypronin/Desktop/reactproject/react-project2/src/components/Providers/CartProvider/CartProvider.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { getInitialStateFromLs } from '../../../helpers/GetInitialStateFromLs';\nimport { setValueInLs } from '../../../helpers/setValueInLs';\nimport { CartContext } from '../../../context/CartContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PRODUCT_IN_BASKET = 'PRODUCT_IN_BASKET';\nconst CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cartItems, setCartItems] = useState(getInitialStateFromLs(PRODUCT_IN_BASKET));\n  const cartCount = () => cartItems.reduce((total, item) => total + (item.quantity || 0), 0);\n  const addToCart = product => {\n    setCartItems(prevCartItems => {\n      const updatedCart = [...prevCartItems];\n      const existingProduct = updatedCart.find(item => item.id === product.id);\n      if (existingProduct) {\n        existingProduct.quantity += 1;\n      } else {\n        updatedCart.push({\n          ...product,\n          quantity: 1\n        });\n      }\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart);\n      return updatedCart;\n    });\n  };\n  const removeFromCart = productId => {\n    setCartItems(prevCartItems => {\n      const updatedCart = prevCartItems.filter(item => item.id !== productId);\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart);\n      return updatedCart;\n    });\n  };\n  const updateQuantity = (productId, change) => {\n    setCartItems(prevCartItems => {\n      const updatedCart = prevCartItems.map(item => {\n        if (item.id === productId) {\n          const newQuantity = item.quantity + change;\n          if (newQuantity <= 0) return null;\n          return {\n            ...item,\n            quantity: newQuantity\n          };\n        }\n        return item;\n      }).filter(item => item !== null);\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart);\n      return updatedCart;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      cartCount: cartCount(),\n      addToCart,\n      removeFromCart,\n      updateQuantity\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"k3C2gWXpwbVPr8Pj+v31CdEx6S0=\");\n_c = CartProvider;\nexport default CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","useState","getInitialStateFromLs","setValueInLs","CartContext","jsxDEV","_jsxDEV","PRODUCT_IN_BASKET","CartProvider","children","_s","cartItems","setCartItems","cartCount","reduce","total","item","quantity","addToCart","product","prevCartItems","updatedCart","existingProduct","find","id","push","removeFromCart","productId","filter","updateQuantity","change","map","newQuantity","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/valerypronin/Desktop/reactproject/react-project2/src/components/Providers/CartProvider/CartProvider.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { getInitialStateFromLs } from '../../../helpers/GetInitialStateFromLs'\nimport { setValueInLs } from '../../../helpers/setValueInLs'\nimport { CartContext } from '../../../context/CartContext'\n\nconst PRODUCT_IN_BASKET = 'PRODUCT_IN_BASKET'\n\nconst CartProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState(getInitialStateFromLs(PRODUCT_IN_BASKET))\n\n  const cartCount = () => cartItems.reduce((total, item) => total + (item.quantity || 0), 0)\n\n  const addToCart = (product) => {\n    setCartItems((prevCartItems) => {\n      const updatedCart = [...prevCartItems]\n      const existingProduct = updatedCart.find((item) => item.id === product.id)\n\n      if (existingProduct) {\n        existingProduct.quantity += 1\n      } else {\n        updatedCart.push({ ...product, quantity: 1 })\n      }\n\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart)\n      return updatedCart\n    })\n  }\n\n  const removeFromCart = (productId) => {\n    setCartItems((prevCartItems) => {\n      const updatedCart = prevCartItems.filter((item) => item.id !== productId)\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart)\n      return updatedCart\n    })\n  }\n\n  const updateQuantity = (productId, change) => {\n    setCartItems((prevCartItems) => {\n      const updatedCart = prevCartItems\n        .map((item) => {\n          if (item.id === productId) {\n            const newQuantity = item.quantity + change\n            if (newQuantity <= 0) return null\n            return { ...item, quantity: newQuantity }\n          }\n          return item\n        })\n        .filter((item) => item !== null)\n\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart)\n      return updatedCart\n    })\n  }\n\n  return (\n    <CartContext.Provider value={{\n      cartItems,\n      cartCount: cartCount(),\n      addToCart,\n      removeFromCart,\n      updateQuantity\n    }}>\n      {children}\n    </CartContext.Provider>\n  )\n}\n\nexport default CartProvider"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,qBAAqB,QAAQ,wCAAwC;AAC9E,SAASC,YAAY,QAAQ,+BAA+B;AAC5D,SAASC,WAAW,QAAQ,8BAA8B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE1D,MAAMC,iBAAiB,GAAG,mBAAmB;AAE7C,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACrC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAACC,qBAAqB,CAACK,iBAAiB,CAAC,CAAC;EAEpF,MAAMM,SAAS,GAAGA,CAAA,KAAMF,SAAS,CAACG,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAK,IAAIC,IAAI,CAACC,QAAQ,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;EAE1F,MAAMC,SAAS,GAAIC,OAAO,IAAK;IAC7BP,YAAY,CAAEQ,aAAa,IAAK;MAC9B,MAAMC,WAAW,GAAG,CAAC,GAAGD,aAAa,CAAC;MACtC,MAAME,eAAe,GAAGD,WAAW,CAACE,IAAI,CAAEP,IAAI,IAAKA,IAAI,CAACQ,EAAE,KAAKL,OAAO,CAACK,EAAE,CAAC;MAE1E,IAAIF,eAAe,EAAE;QACnBA,eAAe,CAACL,QAAQ,IAAI,CAAC;MAC/B,CAAC,MAAM;QACLI,WAAW,CAACI,IAAI,CAAC;UAAE,GAAGN,OAAO;UAAEF,QAAQ,EAAE;QAAE,CAAC,CAAC;MAC/C;MAEAd,YAAY,CAACI,iBAAiB,EAAEc,WAAW,CAAC;MAC5C,OAAOA,WAAW;IACpB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMK,cAAc,GAAIC,SAAS,IAAK;IACpCf,YAAY,CAAEQ,aAAa,IAAK;MAC9B,MAAMC,WAAW,GAAGD,aAAa,CAACQ,MAAM,CAAEZ,IAAI,IAAKA,IAAI,CAACQ,EAAE,KAAKG,SAAS,CAAC;MACzExB,YAAY,CAACI,iBAAiB,EAAEc,WAAW,CAAC;MAC5C,OAAOA,WAAW;IACpB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMQ,cAAc,GAAGA,CAACF,SAAS,EAAEG,MAAM,KAAK;IAC5ClB,YAAY,CAAEQ,aAAa,IAAK;MAC9B,MAAMC,WAAW,GAAGD,aAAa,CAC9BW,GAAG,CAAEf,IAAI,IAAK;QACb,IAAIA,IAAI,CAACQ,EAAE,KAAKG,SAAS,EAAE;UACzB,MAAMK,WAAW,GAAGhB,IAAI,CAACC,QAAQ,GAAGa,MAAM;UAC1C,IAAIE,WAAW,IAAI,CAAC,EAAE,OAAO,IAAI;UACjC,OAAO;YAAE,GAAGhB,IAAI;YAAEC,QAAQ,EAAEe;UAAY,CAAC;QAC3C;QACA,OAAOhB,IAAI;MACb,CAAC,CAAC,CACDY,MAAM,CAAEZ,IAAI,IAAKA,IAAI,KAAK,IAAI,CAAC;MAElCb,YAAY,CAACI,iBAAiB,EAAEc,WAAW,CAAC;MAC5C,OAAOA,WAAW;IACpB,CAAC,CAAC;EACJ,CAAC;EAED,oBACEf,OAAA,CAACF,WAAW,CAAC6B,QAAQ;IAACC,KAAK,EAAE;MAC3BvB,SAAS;MACTE,SAAS,EAAEA,SAAS,CAAC,CAAC;MACtBK,SAAS;MACTQ,cAAc;MACdG;IACF,CAAE;IAAApB,QAAA,EACCA;EAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAA5B,EAAA,CA1DKF,YAAY;AAAA+B,EAAA,GAAZ/B,YAAY;AA4DlB,eAAeA,YAAY;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}