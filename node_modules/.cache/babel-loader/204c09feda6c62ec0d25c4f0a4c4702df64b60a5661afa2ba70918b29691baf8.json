{"ast":null,"code":"import React,{useState}from'react';import{getInitialStateFromLs}from'../../../helpers/GetInitialStateFromLs';import{setValueInLs}from'../../../helpers/setValueInLs';import{CartContext}from'../../../context/CartContext';import{jsx as _jsx}from\"react/jsx-runtime\";const PRODUCT_IN_BASKET='PRODUCT_IN_BASKET';const CartProvider=_ref=>{let{children}=_ref;const[cartItems,setCartItems]=useState(getInitialStateFromLs(PRODUCT_IN_BASKET));const cartCount=()=>cartItems.reduce((total,item)=>total+(item.quantity||0),0);const addToCart=product=>{setCartItems(prevCartItems=>{const updatedCart=[...prevCartItems];const existingProduct=updatedCart.find(item=>item.id===product.id);if(existingProduct){existingProduct.quantity+=1;}else{updatedCart.push({...product,quantity:1});}setValueInLs(PRODUCT_IN_BASKET,updatedCart);return updatedCart;});};const removeFromCart=productId=>{setCartItems(prevCartItems=>{const updatedCart=prevCartItems.filter(item=>item.id!==productId);setValueInLs(PRODUCT_IN_BASKET,updatedCart);return updatedCart;});};const updateQuantity=(productId,change)=>{setCartItems(prevCartItems=>{const updatedCart=prevCartItems.map(item=>{if(item.id===productId){const newQuantity=item.quantity+change;if(newQuantity<=0)return null;return{...item,quantity:newQuantity};}return item;}).filter(item=>item!==null);setValueInLs(PRODUCT_IN_BASKET,updatedCart);return updatedCart;});};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartItems,cartCount:cartCount(),addToCart,removeFromCart,updateQuantity},children:children});};export default CartProvider;","map":{"version":3,"names":["React","useState","getInitialStateFromLs","setValueInLs","CartContext","jsx","_jsx","PRODUCT_IN_BASKET","CartProvider","_ref","children","cartItems","setCartItems","cartCount","reduce","total","item","quantity","addToCart","product","prevCartItems","updatedCart","existingProduct","find","id","push","removeFromCart","productId","filter","updateQuantity","change","map","newQuantity","Provider","value"],"sources":["/Users/valerypronin/Desktop/reactproject/react-project2/src/components/Providers/CartProvider/CartProvider.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { getInitialStateFromLs } from '../../../helpers/GetInitialStateFromLs'\nimport { setValueInLs } from '../../../helpers/setValueInLs'\nimport { CartContext } from '../../../context/CartContext'\n\nconst PRODUCT_IN_BASKET = 'PRODUCT_IN_BASKET'\n\nconst CartProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState(getInitialStateFromLs(PRODUCT_IN_BASKET))\n\n  const cartCount = () => cartItems.reduce((total, item) => total + (item.quantity || 0), 0)\n\n  const addToCart = (product) => {\n    setCartItems((prevCartItems) => {\n      const updatedCart = [...prevCartItems]\n      const existingProduct = updatedCart.find((item) => item.id === product.id)\n\n      if (existingProduct) {\n        existingProduct.quantity += 1\n      } else {\n        updatedCart.push({ ...product, quantity: 1 })\n      }\n\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart)\n      return updatedCart\n    })\n  }\n\n  const removeFromCart = (productId) => {\n    setCartItems((prevCartItems) => {\n      const updatedCart = prevCartItems.filter((item) => item.id !== productId)\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart)\n      return updatedCart\n    })\n  }\n\n  const updateQuantity = (productId, change) => {\n    setCartItems((prevCartItems) => {\n      const updatedCart = prevCartItems\n        .map((item) => {\n          if (item.id === productId) {\n            const newQuantity = item.quantity + change\n            if (newQuantity <= 0) return null\n            return { ...item, quantity: newQuantity }\n          }\n          return item\n        })\n        .filter((item) => item !== null)\n\n      setValueInLs(PRODUCT_IN_BASKET, updatedCart)\n      return updatedCart\n    })\n  }\n\n  return (\n    <CartContext.Provider value={{\n      cartItems,\n      cartCount: cartCount(),\n      addToCart,\n      removeFromCart,\n      updateQuantity\n    }}>\n      {children}\n    </CartContext.Provider>\n  )\n}\n\nexport default CartProvider"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,qBAAqB,KAAQ,wCAAwC,CAC9E,OAASC,YAAY,KAAQ,+BAA+B,CAC5D,OAASC,WAAW,KAAQ,8BAA8B,QAAAC,GAAA,IAAAC,IAAA,yBAE1D,KAAM,CAAAC,iBAAiB,CAAG,mBAAmB,CAE7C,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAChC,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAACC,qBAAqB,CAACK,iBAAiB,CAAC,CAAC,CAEpF,KAAM,CAAAM,SAAS,CAAGA,CAAA,GAAMF,SAAS,CAACG,MAAM,CAAC,CAACC,KAAK,CAAEC,IAAI,GAAKD,KAAK,EAAIC,IAAI,CAACC,QAAQ,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAE1F,KAAM,CAAAC,SAAS,CAAIC,OAAO,EAAK,CAC7BP,YAAY,CAAEQ,aAAa,EAAK,CAC9B,KAAM,CAAAC,WAAW,CAAG,CAAC,GAAGD,aAAa,CAAC,CACtC,KAAM,CAAAE,eAAe,CAAGD,WAAW,CAACE,IAAI,CAAEP,IAAI,EAAKA,IAAI,CAACQ,EAAE,GAAKL,OAAO,CAACK,EAAE,CAAC,CAE1E,GAAIF,eAAe,CAAE,CACnBA,eAAe,CAACL,QAAQ,EAAI,CAAC,CAC/B,CAAC,IAAM,CACLI,WAAW,CAACI,IAAI,CAAC,CAAE,GAAGN,OAAO,CAAEF,QAAQ,CAAE,CAAE,CAAC,CAAC,CAC/C,CAEAd,YAAY,CAACI,iBAAiB,CAAEc,WAAW,CAAC,CAC5C,MAAO,CAAAA,WAAW,CACpB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAK,cAAc,CAAIC,SAAS,EAAK,CACpCf,YAAY,CAAEQ,aAAa,EAAK,CAC9B,KAAM,CAAAC,WAAW,CAAGD,aAAa,CAACQ,MAAM,CAAEZ,IAAI,EAAKA,IAAI,CAACQ,EAAE,GAAKG,SAAS,CAAC,CACzExB,YAAY,CAACI,iBAAiB,CAAEc,WAAW,CAAC,CAC5C,MAAO,CAAAA,WAAW,CACpB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAQ,cAAc,CAAGA,CAACF,SAAS,CAAEG,MAAM,GAAK,CAC5ClB,YAAY,CAAEQ,aAAa,EAAK,CAC9B,KAAM,CAAAC,WAAW,CAAGD,aAAa,CAC9BW,GAAG,CAAEf,IAAI,EAAK,CACb,GAAIA,IAAI,CAACQ,EAAE,GAAKG,SAAS,CAAE,CACzB,KAAM,CAAAK,WAAW,CAAGhB,IAAI,CAACC,QAAQ,CAAGa,MAAM,CAC1C,GAAIE,WAAW,EAAI,CAAC,CAAE,MAAO,KAAI,CACjC,MAAO,CAAE,GAAGhB,IAAI,CAAEC,QAAQ,CAAEe,WAAY,CAAC,CAC3C,CACA,MAAO,CAAAhB,IAAI,CACb,CAAC,CAAC,CACDY,MAAM,CAAEZ,IAAI,EAAKA,IAAI,GAAK,IAAI,CAAC,CAElCb,YAAY,CAACI,iBAAiB,CAAEc,WAAW,CAAC,CAC5C,MAAO,CAAAA,WAAW,CACpB,CAAC,CAAC,CACJ,CAAC,CAED,mBACEf,IAAA,CAACF,WAAW,CAAC6B,QAAQ,EAACC,KAAK,CAAE,CAC3BvB,SAAS,CACTE,SAAS,CAAEA,SAAS,CAAC,CAAC,CACtBK,SAAS,CACTQ,cAAc,CACdG,cACF,CAAE,CAAAnB,QAAA,CACCA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,cAAe,CAAAF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}